<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TacWord</title>
    <style>
        :root {
            --bg-color: #1a1c18;
            --panel-color: #2b3024;
            --accent-color: #556b2f; /* Dark Olive Green */
            --highlight-color: #7c8f5a;
            --text-color: #c2c5bb;
            --alert-color: #2b3024;
            --success-color: #4b5320;
        }

        * {
            box-sizing: border-box;
            touch-action: manipulation; /* Prevents double-tap zoom on mobile */
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Courier New', Courier, monospace; /* Fallback for a rugged look */
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* Main Game Container */
        #game-container {
            width: 100%;
            max-width: 500px;
            height: 100%;
            max-height: 800px;
            display: flex;
            flex-direction: column;
            padding: 20px;
            background: radial-gradient(circle at center, var(--panel-color) 0%, var(--bg-color) 100%);
            border: 4px solid var(--accent-color);
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
            position: relative;
        }

        /* Header & UI Elements */
        header {
            text-align: center;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 2px dashed var(--accent-color);
            padding-bottom: 15px;
        }

        h1 {
            margin: 0;
            font-size: 2rem;
            color: var(--highlight-color);
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

      .sub-header {
      display: flex;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
      margin-top: 10px;
    }
        #score-board {
            color: var(--highlight-color);
        }

        /* Game Area */
        #play-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 20px; /* Adjusted gap */
            overflow-y: auto; /* Allow scrolling if content is too tall */
        }

        /* NEW: Hint Styles */
        #hint-container {
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border: 1px dashed var(--accent-color);
            border-radius: 4px;
            text-align: center;
            flex-shrink: 0; /* Prevent hint from shrinking */
        }
        #hint-label {
            font-size: 0.8rem;
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        #hint-display {
            font-size: 1rem;
            color: var(--highlight-color);
            font-weight: bold;
            line-height: 1.4;
        }

        .letter-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            min-height: 60px; /* preserve space even if empty */
        }

        /* The interactive tiles */
        .tile {
            width: 50px;
            height: 50px;
            background-color: #3a4232;
            border: 2px solid var(--accent-color);
            color: #e0e0e0;
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            border-radius: 4px;
            box-shadow: 0 4px 0 var(--bg-color);
            transition: all 0.1s ease;
            text-transform: uppercase;
        }

        .tile:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* Placeholder slots for the answer */
        .slot {
            width: 50px;
            height: 50px;
            background-color: rgba(0,0,0,0.3);
            border: 2px dashed var(--accent-color);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* When a tile is placed in a slot */
        .slot .tile {
            margin: 0; /* Override any container margins */
            background-color: var(--highlight-color);
            color: var(--bg-color);
            border-color: #2b3024;
        }

        .hidden {
            visibility: hidden;
            pointer-events: none;
        }

        /* Controls */
        #controls {
            margin-top: auto;
            display: flex;
            justify-content: center;
            padding-top: 20px;
            flex-shrink: 0; /* Prevent controls from shrinking */
        }

       .btn-tactical {
    background-color: var(--alert-color);
    color: white;
    border: none;
    padding: 15px 30px;
    font-family: inherit;
    font-size: 1rem;
    text-transform: uppercase;
    font-weight: bold;
    letter-spacing: 1px;
    cursor: pointer;
    /* clip-path was here, now removed for straight edges */
    transition: background-color 0.2s;
}

        .btn-tactical:hover {
            border-color: #2b3024;
        }

        /* Overlays and Animations */
        #message-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.85);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            text-align: center;
            padding: 20px;
        }

        #message-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        #message-title {
            font-size: 2.5rem;
            color: var(--highlight-color);
            margin-bottom: 1rem;
            text-transform: uppercase;
        }

        #message-text {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            line-height: 1.5;
        }
        
        /* NEW: Style for hint in overlay */
        #message-text .hint {
            font-size: 1.1rem;
            color: var(--text-color);
            font-style: italic;
            opacity: 0.9;
        }

        .win-text { color: var(--highlight-color); }
        .fail-text { color: #e74c3c; }

        /* CRT Monitor effect overlay (subtle scanlines) */
        .scanlines {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
            z-index: 5;
            opacity: 0.3;
        }

    </style>
</head>
<body>

    <div id="game-container">
        <div class="scanlines"></div>

        <header>
            <h1>TacWord</h1>
            <div class="sub-header">
                
                <span id="score-board">SCORE: 0</span>
            </div>
        </header>

        <main id="play-area">
            <div id="hint-container">
      
                <div id="hint-display">Loading...</div>
            </div>

            <div>
                <div style="text-align: center; margin-bottom: 10px; opacity: 0.7;">TARGET SEQUENCE:</div>
                <div id="answer-slots" class="letter-container">
                    </div>
            </div>

            <div>
                <div style="text-align: center; margin-bottom: 10px; opacity: 0.7;">AVAILABLE ASSETS:</div>
                <div id="letter-pool" class="letter-container">
                    </div>
            </div>
        </main>

        <div id="controls">
            <button id="give-up-btn" class="btn-tactical">Skip / Reveal</button>
        </div>

        <div id="message-overlay">
            <h2 id="message-title">MISSION SUCCESS</h2>
            <div id="message-text">+10 POINTS</div>
            <button id="overlay-btn" class="btn-tactical" style="background-color: var(--accent-color)">CONTINUE</button>
        </div>
    </div>

    <script>
        // --- Configuration ---
 const WORD_LIST = [
    { term: "ROGER", hint: "Confirmation that the previous message was received and understood." },
    { term: "WILCO", hint: "Confirmation that the previous message was received and **will be complied with**." },
    { term: "BREACH", hint: "The action of forcibly entering a locked or barricaded room/structure." },
    { term: "BLACK", hint: "The term used to mean you're out of ammo. I am _ on ammo." },
        { term: "WINCHESTER", hint: "The term used to mean you're out of ammo. I am _ ." },
    { term: "OPSEC", hint: "Measures taken to protect sensitive information." },
    { term: "CONTACT", hint: "Visual or auditory confirmation of enemy forces." },
    { term: "WHEELS UP", hint: "The aircraft has left the ground." },
    { term: "WHEELS DOWN", hint: "The aircraft has touched the ground." },
    { term: "RABBIT", hint: "An enemy who is running away trying to escape." },
    { term: "SQUIRTER", hint: "An enemy who is running away trying to escape." },
        { term: "CQC", hint: "Tactics for tight spaces." },
    { term: "BAR", hint: "A summary given *before* an event or mission." },
    { term: "AAR", hint: "A breakdown /report conducted *after* the operation ends." },
    { term: "BIRD", hint: "Referring to rotary-wing transportation or air support." },
    { term: "ETA", hint: "The projected time of arrival at the destination." },
    { term: "FUBAR", hint: "A state of complete and irredeemable mess." },
    { term: "INTERNAL", hint: "The action of moving into a structure." },
    { term: "EXTERNAL", hint: "The action of leaving a structure." },
    { term: "HOLD", hint: "Maintain the current location and defensive stance." },
    { term: "HVT", hint: "A primary, priority target with significant importance." },
    { term: "KLICK", hint: "A unit of distance often used in field communications (metric)." },
    { term: "LOOK ALIVE", hint: "Check your surroundings for threats or changes." },
    { term: "GET LOW", hint: "Drop immediately to the ground due to nearby danger." },
    { term: "LZ", hint: "The designated spot for aircraft pickup or drop-off." },
    { term: "NODS", hint: "Equipment used to enhance vision in low-light conditions." },
    { term: "FRAG READY", hint: "An explosive projectile is prepared to be thrown." },
    { term: "FRAG OUT", hint: "A thrown explosive projectile is now live." },
    { term: "FLASH READY", hint: "A device designed to disorient is prepared to be thrown." },
    { term: "FLASH OUT", hint: "A thrown disorientation device is now live." },
    { term: "SMOKE UP", hint: "Warning for an incoming enemy missile lock." },
    { term: "ALL CLEAR", hint: "Confirmation that the general area is safe and secured." },
    { term: "CLEARED HOT", hint: "Permission to use full, unrestricted force." },
    { term: "CEASE FIRE", hint: "Immediate command to stop all current shooting." },
    { term: "BASE CLEAR", hint: "Confirmation that the main facility is free of threats." },
    { term: "EXECUTE", hint: "The signal to simultaneously engage targets." },
    { term: "COC", hint: "The established sequence of authority and reporting." },
    { term: "HELOCAST", hint: "Inserting personnel into a water landing zone from a hovering or low-flying helicopter." },
    { term: "HALO", hint: "When you jump and deploy parachute near the ground" },
    { term: "HAHO", hint: "When you jump and deploy parachute almost immediatly." },
    { term: "DIAMOND", hint: "A four-person patrol formation, good for 360-degree security." },
    { term: "OVERWATCH", hint: "A dedicated position providing supporting fire or security for another moving element." },
    { term: "SOP", hint: "Standard Operating Procedure—a set of established, mandatory rules for specific tasks." },
    { term: "ROE", hint: "Rules of Engagement—the limitations on the use of force." },
    { term: "SITREP", hint: "Situation Report—a formal briefing on the current status of the mission or unit." },
    { term: "CAS", hint: "Air strikes conducted close to friendly forces." },
    { term: "QRF", hint: "A unit on standby ready to respond to an emergency or aid a pinned down element." },
    { term: "DEAD MAN SWITCH", hint: "A system or action that will trigger if an operator is incapacitated (e.g., in explosives/traps)." },
    { term: "GHOSTING", hint: "Moving through an area with extreme stealth and minimal noise." },
    { term: "RECON", hint: "Gaining information by visual or other means about enemy activities or terrain." },
    { term: "E&E", hint: "Escape and Evasion—tactics used by isolated personnel to return to friendly lines." },
    { term: "BREAK CONTACT", hint: "A command to disengage from the enemy and move quickly to a safe distance." },
    { term: "RALLY POINT", hint: "A pre-designated location where a dispersed unit can reassemble." },
    { term: "GOT YOUR SIX", hint: "A verbal confirmation that a team member is covering the person's rear arc (the 6 o'clock position)." },
    { term: "BOUNDING OVERWATCH", hint: "A basic tactic where one element fires to suppress the enemy while the other element moves forward." },
        { term: "LEAPFROG", hint: "A basic tactic where one element fires to suppress the enemy while the other element moves forward." },
    { term: "SUPPRESSIVE FIRE", hint: "Firing high volumes of rounds at a target to restrict their movement and ability to engage." },
    { term: "DANGER CLOSE", hint: "Indicates that supporting fire (like CAS) is near enough to friendly forces to risk casualties." },
    { term: "TANGO", hint: "Commonly used to refer to a hostile target." },
    { term: "IED", hint: "Improvised Explosive Device—a homemade bomb or trap." },
    { term: "GRID", hint: "A set of numbers used to pinpoint a precise location on a map or GPS." },
    { term: "STAND-TO", hint: "A period, typically dawn and dusk, where all personnel are fully alert and manned at defensive positions." },
    { term: "RTB", hint: "Return To Base—a command or report indicating the unit is heading back to the main operating location." },
    { term: "HOT LZ", hint: "A landing zone currently under effective enemy fire." },
    { term: "COLD LZ", hint: "A landing zone confirmed to be free of enemy fire." }
];

        // --- Game State ---
        let state = {
            score: 0,
            currentWord: "",
            currenthint: "", // NEW: To store the hint/hint
            originalPool: [], // Array of {id, char}
            currentSlots: []  // Array of {char, originId} or null
        };

        // --- DOM Elements ---
        const els = {
            score: document.getElementById('score-board'),
            hintDisplay: document.getElementById('hint-display'), // NEW: Hint element
            answerSlots: document.getElementById('answer-slots'),
            letterPool: document.getElementById('letter-pool'),
            giveUpBtn: document.getElementById('give-up-btn'),
            overlay: document.getElementById('message-overlay'),
            msgTitle: document.getElementById('message-title'),
            msgText: document.getElementById('message-text'),
            overlayBtn: document.getElementById('overlay-btn')
        };

        // --- Core Logic ---

        function init() {
            // Load initial High Score if we wanted localstorage, but keeping it simple.
            els.giveUpBtn.addEventListener('click', giveUp);
            els.overlayBtn.addEventListener('click', hideOverlayAndNext);
            
            // Show start instructions
            showOverlay("BRIEFING:", "REASSEMBLE WORDS.<br>USE THE HINT TO IDENTIFY THE LINGO.<br>TAP LETTERS TO ORDER THEM.", "START MISSION");
        }

        function nextRound() {
            // Pick a random word object
            const wordData = WORD_LIST[Math.floor(Math.random() * WORD_LIST.length)];
            state.currentWord = wordData.term.toUpperCase();
            state.currenthint = wordData.hint;
            
            // Scramble it
            let scrambledChars = scramble(state.currentWord);
            
            // Set up state for tracking tiles
            state.originalPool = scrambledChars.map((char, index) => ({
                id: index,
                char: char,
                used: false
            }));

            // Reset slots (null means empty)
            state.currentSlots = Array(state.currentWord.length).fill(null);

            render();
        }

        function scramble(word) {
            let arr = word.split('');
            
            // Only scramble if length > 1 to avoid infinite loops on single char words
            if (arr.length <= 1) return arr;

            let scrambled;
            // Keep scrambling until it doesn't match the original
            do {
                 // Fisher-Yates shuffle
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
                scrambled = arr.join('');
            } while (scrambled === word);

            return arr;
        }

        // --- Rendering & Interaction ---

        function render() {
            els.score.textContent = `SCORE: ${state.score}`;
            els.hintDisplay.textContent = state.currenthint; // NEW: Update hint text

            // 1. Render Answer Slots
            els.answerSlots.innerHTML = '';
            state.currentSlots.forEach((slotData, index) => {
                const slotEl = document.createElement('div');
                slotEl.className = 'slot';
                
                if (slotData) {
                    // There is a tile in this slot
                    const tile = createTile(slotData.char);
                    tile.onclick = () => handleSlotClick(index);
                    slotEl.appendChild(tile);
                }

                els.answerSlots.appendChild(slotEl);
            });

            // 2. Render Letter Pool
            els.letterPool.innerHTML = '';
            state.originalPool.forEach(item => {
                const tile = createTile(item.char);
                if (item.used) {
                    tile.classList.add('hidden');
                } else {
                    tile.onclick = () => handlePoolClick(item.id);
                }
                els.letterPool.appendChild(tile);
            });
        }

        function createTile(char) {
            const tile = document.createElement('div');
            tile.className = 'tile';
            tile.textContent = char;
            return tile;
        }

        function handlePoolClick(id) {
            // Find first empty slot
            const emptyIndex = state.currentSlots.indexOf(null);
            if (emptyIndex === -1) return; // No room

            // Mark pool item as used
            const poolItem = state.originalPool.find(i => i.id === id);
            poolItem.used = true;

            // Place in slot
            state.currentSlots[emptyIndex] = { char: poolItem.char, originId: id };

            render();
            checkWinCondition();
        }

        function handleSlotClick(index) {
            const slotData = state.currentSlots[index];
            if (!slotData) return;

            // Return to pool
            const poolItem = state.originalPool.find(i => i.id === slotData.originId);
            poolItem.used = false;

            // Clear slot
            state.currentSlots[index] = null;

            render();
        }

        function checkWinCondition() {
            // Check if all slots are filled
            if (state.currentSlots.includes(null)) return;

            // Form the word
            const formedWord = state.currentSlots.map(s => s.char).join('');

            if (formedWord === state.currentWord) {
                // WIN!
                state.score += 10;
                // NEW: Show overlay with hint
                showOverlay(
                    "OBJECTIVE COMPLETE", 
                    `WORD DECODED: <span class="win-text">${state.currentWord}</span><br><br><span class="hint">${state.currenthint}</span><br><br>+10 POINTS`, 
                    "NEXT WORD"
                );
            }
        }

        function giveUp() {
            // NEW: Show overlay with hint
            showOverlay(
                "MISSION FAILED", 
                `CORRECT INTEL: <span class="fail-text">${state.currentWord}</span><br><br><span class="hint">${state.currenthint}</span><br><br>NO POINTS AWARDED`, 
                "NEXT WORD"
            );
        }

        // --- Overlay System ---

        function showOverlay(title, text, btnText) {
            els.msgTitle.textContent = title;
            els.msgText.innerHTML = text;
            els.overlayBtn.textContent = btnText || "CONTINUE";
            els.overlay.classList.add('active');
        }

        function hideOverlayAndNext() {
            els.overlay.classList.remove('active');
            // If it was the start screen, this kicks off the first real round.
            nextRound();
        }

        // --- Start ---
        init();

    </script>
</body>
</html>